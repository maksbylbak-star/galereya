<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–î–ª—è –ê–Ω—ñ üíó</title>

<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíñ</text></svg>">

<style>
@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Open+Sans:wght@300;400&display=swap');

body {margin:0; padding:0; font-family:'Open Sans', sans-serif; background: radial-gradient(circle at 30% 30%, #330d1a 0%, #4d0f2f 50%, #2b0a1a 100%); overflow-x:hidden;}

#preloader {position: fixed; top:0; left:0; width:100%; height:100%; background: linear-gradient(120deg, #3a0a1b, #621c3a, #3a0a1b); background-size:400% 400%; display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:9999; opacity:1; transition:opacity 2s ease; animation:gradientShift 8s ease-in-out infinite; overflow:hidden;}
@keyframes gradientShift {0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.preloader-content {text-align:center;color:#ffd9e8;font-family:'Great Vibes', cursive; position:relative; z-index:2; animation:fadeInText 2s ease forwards;}
@keyframes fadeInText {from {opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);}}
.preloader-content h2 {font-size:2.8rem;margin-bottom:10px;text-shadow:0 0 12px rgba(255,170,200,0.6);}
.preloader-content p {font-size:1.2rem;color:#ffbfd6;margin-bottom:20px;}
#enter-btn {background: rgba(255,192,203,0.15); border:2px solid #ff99cc; padding:10px 30px; border-radius:25px; font-size:1rem; cursor:pointer; transition:.3s;}
#enter-btn:hover {background: rgba(255,153,204,0.3); transform: scale(1.05); box-shadow:0 0 15px #ff99cc;}
.hearts-bg {position:absolute; top:0; left:0; width:100%; height:100%; overflow:hidden; z-index:1;}

.main-content {opacity:0; animation:fadeInMain 2s ease forwards; padding:40px 20px 120px 20px; max-width:900px; margin:auto; text-align:center; position:relative;}
@keyframes fadeInMain {from {opacity:0; transform:translateY(40px);} to{opacity:1; transform:translateY(0);}}
.main-title {font-family:'Great Vibes', cursive; font-size:3rem; color:#ff99cc; text-shadow:0 0 15px rgba(255,160,200,0.6); margin-bottom:25px;}

.album {display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr)); gap:25px; margin-top:30px;}
.photo-card {background: rgba(255,255,255,0.05); backdrop-filter: blur(6px); border-radius:20px; padding:15px; box-shadow:0 0 12px rgba(255,120,180,0.3); transition: transform .4s ease, box-shadow .4s ease; opacity:0; cursor:pointer;}
.photo-card img {width:100%; height:270px; border-radius:15px; object-fit:cover;}
.photo-description {margin-top:10px; color:#ffb4d4; font-family:'Open Sans', sans-serif; font-size:0.95rem; text-shadow:0 0 5px rgba(255,100,150,0.4);}

.message-box {margin-top:60px; padding:25px; background: rgba(255,255,255,0.05); border-radius:20px; backdrop-filter:blur(6px); box-shadow:0 0 15px rgba(255,150,200,0.4);}
.message-title {font-family:'Great Vibes', cursive; font-size:2.6rem; color:#ff99cc; margin-bottom:10px;}
.message-text {color:#ffbed9; font-size:1.1rem; line-height:1.7;}

.sparkle {position:fixed; width:6px; height:6px; background:white; border-radius:50%; pointer-events:none; animation:sparkleAnim 2s linear infinite; opacity:0.7;}
@keyframes sparkleAnim {from{transform:translateY(0) scale(1);} to{transform:translateY(-60px) scale(0);}}
.petal {position:fixed; top:-10px; font-size:22px; animation:fallPetal linear infinite; opacity:0.9;}
@keyframes fallPetal {0%{transform:translateY(0) rotate(0deg);} 100%{transform:translateY(100vh) rotate(360deg);}}

.music-control {position:fixed; bottom:20px; background: rgba(102, 17, 68,0.6); border:2px solid #ff99cc; padding:10px 25px; border-radius:25px; color:#ff99cc; font-size:16px; cursor:pointer; z-index:10; backdrop-filter:blur(4px); transition:.3s;}
.music-control:hover {transform:scale(1.05); background: rgba(136,34,85,0.8); box-shadow:0 0 15px #ff99cc;}

.modal {position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); backdrop-filter:blur(6px); display:none; justify-content:center; align-items:center; z-index:99999;}
.modal img {max-width:80%; max-height:80%; border-radius:20px; box-shadow:0 0 20px rgba(255,120,180,0.8);}
.modal-close {position:absolute; top:20px; right:40px; font-size:2.6rem; color:white; cursor:pointer;}

#add-photo-btn {position:fixed; top:20px; right:20px; background:rgba(255,192,203,0.25); border:2px solid #ff99cc; padding:10px 20px; border-radius:20px; color:#ffd1dc; cursor:pointer; z-index:20;}
#add-photo-btn:hover {background:rgba(255,153,204,0.45);}
</style>
</head>

<body>

<div id="preloader">
  <div class="hearts-bg"></div>
  <div class="preloader-content">
    <h2>–î–ª—è —Ç–µ–±–µ üíå</h2>
    <p>–¢—É—Ç –∑—ñ–±—Ä–∞–Ω–µ –≤—Å–µ —Ç–µ, —â–æ —è –ø–æ–∫–∏ —â–æ –º–∞—é...</p>
    <button id="enter-btn">–£–≤—ñ–π—Ç–∏ üíñ</button>
  </div>
</div>

<div class="main-content" id="main">
  <h2 class="main-title">–ú–æ—è –ø—Ä–∏–Ω—Ü–µ—Å–∞ üíó</h2>
  <div class="album"></div>
  <div class="message-box">
    <div class="message-title">–ü–æ—Å–ª–∞–Ω–Ω—è –¥–ª—è —Ç–µ–±–µ üíå</div>
    <div class="message-text">
      –¢–∏ –∑–º—ñ–Ω—é—î—à –º—ñ–π —Å–≤—ñ—Ç —Ç–∞–∫, —è–∫ –Ω–µ –∑–º—ñ–Ω—é–≤–∞–≤ –Ω—ñ—Ö—Ç–æ.  
      –¢–∏ —Ä–æ–±–∏—à –º–æ—î –∂–∏—Ç—Ç—è —Ç–µ–ø–ª—ñ—à–∏–º, —Å–≤—ñ—Ç–ª—ñ—à–∏–º —ñ —â–∞—Å–ª–∏–≤—ñ—à–∏–º.
      <br><br>
      –î—è–∫—É—é —Ç–æ–±—ñ –∑–∞ –∫–æ–∂–µ–Ω –º–æ–º–µ–Ω—Ç, –∑–∞ –∫–æ–∂–Ω—É –µ–º–æ—Ü—ñ—é,  
      –∑–∞ –∫–æ–∂–Ω–µ —Å–ª–æ–≤–æ, —è–∫–µ —Ç–∏ –º–µ–Ω—ñ —Å–∫–∞–∑–∞–ª–∞.
      <br><br>
      –¢–∏ - –º–æ—î –≤—Å–µ ‚ù§Ô∏è
    </div>
  </div>
</div>

<button class="music-control" onclick="toggleMusic()">üéµ –ú—É–∑–∏–∫–∞</button>
<audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>

<button id="add-photo-btn">‚ûï –î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ</button>

<div class="modal" id="add-photo-modal">
  <div style="background: rgba(0,0,0,0.8); padding:25px; border-radius:15px; text-align:center; max-width:400px; width:90%;">
    <h2 style="color:#ff99cc; font-family:'Great Vibes',cursive;">–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ üíñ</h2>
    <input id="photo-file" type="file" accept="image/*" style="margin:10px 0;">
    <input id="photo-desc" type="text" placeholder="–í–≤–µ–¥–∏ –æ–ø–∏—Å" style="width:90%; padding:8px; margin:10px 0; border-radius:8px; border:none;">
    <br>
    <button id="save-photo" style="margin-top:10px; padding:8px 20px; border-radius:15px; border:none; background:#ff99cc; color:white; cursor:pointer;">–î–æ–¥–∞—Ç–∏</button>
    <button onclick="closeAddPhoto()" style="margin-top:10px; padding:8px 20px; border-radius:15px; border:none; background:#ff6fa3; color:white; cursor:pointer;">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
  </div>
</div>

<div class="modal" id="gallery-modal">
  <span class="modal-close" onclick="closeGallery()">&times;</span>
  <img id="modal-img">
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-storage.js";
  import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAj1aM_i39eq42FdFUw9-QZeq0gJhQwb-E",
    authDomain: "galereya-ani.firebaseapp.com",
    projectId: "galereya-ani",
    storageBucket: "galereya-ani.firebasestorage.app",
    messagingSenderId: "564788961310",
    appId: "1:564788961310:web:64512d257bca9aaa18ce0f",
    measurementId: "G-1W2LH0LDTW"
  };

  const app = initializeApp(firebaseConfig);
  const storage = getStorage(app);
  const db = getFirestore(app);

  const heartColors = ['#ffb6c1','#ffd1dc','#ffc1cc','#f9a5c2','#ffbbe6','#fff0f6'];

  function createPreloaderHeart() {
    const h = document.createElement("div");
    h.innerHTML = "üíñ";
    h.style.position="absolute";
    h.style.bottom="-20px";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=(15+Math.random()*10)+"px";
    h.style.animation=`floatUp ${6+Math.random()*4}s linear`;
    h.style.color=heartColors[Math.floor(Math.random()*heartColors.length)];
    document.querySelector(".hearts-bg").appendChild(h);
    setTimeout(()=>h.remove(),9000);
  }
  setInterval(createPreloaderHeart,600);

  const music=document.getElementById("bg-music");
  function fadeInMusic() {music.volume=0; const iv=setInterval(()=>{if(music.volume<0.4) music.volume+=0.02; else clearInterval(iv)},200);}
  document.getElementById("enter-btn").onclick=()=>{music.play().then(()=>fadeInMusic()); document.getElementById("preloader").style.opacity="0"; setTimeout(()=>document.getElementById("preloader").remove(),2500);}
  function toggleMusic(){if(music.paused) music.play(); else music.pause();}

  setInterval(()=>{
    const p=document.createElement("div"); p.classList.add("petal"); p.innerHTML="üå∏"; p.style.left=Math.random()*100+"vw"; p.style.animationDuration=4+Math.random()*4+"s"; document.body.appendChild(p); setTimeout(()=>p.remove(),8000);
  },500);

  setInterval(()=>{
    const s=document.createElement("div"); s.classList.add("sparkle"); s.style.left=Math.random()*100+"vw"; s.style.top=Math.random()*100+"vh"; s.style.animationDuration=(1+Math.random())+"s"; document.body.appendChild(s); setTimeout(()=>s.remove(),1500);
  },300);

  const addPhotoBtn = document.getElementById("add-photo-btn");
  const addPhotoModal = document.getElementById("add-photo-modal");
  const savePhotoBtn = document.getElementById("save-photo");
  const photoFileInput = document.getElementById("photo-file");
  const photoDescInput = document.getElementById("photo-desc");
  const album = document.querySelector(".album");

  addPhotoBtn.onclick = () => addPhotoModal.style.display = "flex";
  window.closeAddPhoto = () => addPhotoModal.style.display = "none";

  savePhotoBtn.onclick = async () => {
    const file = photoFileInput.files[0];
    const desc = photoDescInput.value.trim();
    if(!file||!desc) return alert("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∏–±–µ—Ä–∏ —Ñ–∞–π–ª —Ç–∞ –≤–≤–µ–¥–∏ –æ–ø–∏—Å!");
    const storageRef = ref(storage, 'photos/'+Date.now()+'_'+file.name);
    await uploadBytes(storageRef,file);
    const url = await getDownloadURL(storageRef);
    await addDoc(collection(db,'photos'), {url, desc, timestamp:serverTimestamp()});
    photoFileInput.value=""; photoDescInput.value=""; closeAddPhoto();
  };

  const q = query(collection(db,'photos'), orderBy('timestamp'));
  onSnapshot(q, snapshot => {
    album.innerHTML="";
    snapshot.forEach(doc=>{
      const data = doc.data();
      const card = document.createElement("div");
      card.classList.add("photo-card");
      card.innerHTML=`<img src="${data.url}"><div class="photo-description">${data.desc}</div>`;
      card.querySelector("img").onclick=()=>{document.getElementById("gallery-modal").style.display="flex"; document.getElementById("modal-img").src=data.url;}
      album.appendChild(card);
    });
  });

  window.closeGallery = ()=>{document.getElementById("gallery-modal").style.display="none";}
</script>

</body>
</html>
