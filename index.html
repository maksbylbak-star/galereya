<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–î–ª—è –ê–Ω—ñ üíó</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíñ</text></svg>">
<style>
@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Open+Sans:wght@300;400&display=swap');
body{margin:0;font-family:'Open Sans',sans-serif;background:radial-gradient(circle at 30% 30%, #330d1a 0%, #4d0f2f 50%, #2b0a1a 100%);overflow-x:hidden;}
.main-content{opacity:0;animation:fadeInMain 2s ease forwards;padding:40px 20px 120px 20px;max-width:900px;margin:auto;text-align:center;position:relative;}
@keyframes fadeInMain{from{opacity:0;transform:translateY(40px);} to{opacity:1;transform:translateY(0);}}
.main-title{font-family:'Great Vibes', cursive;font-size:3rem;color:#ff99cc;text-shadow:0 0 15px rgba(255,160,200,0.6);margin-bottom:25px;}
.album{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:25px;margin-top:30px;}
.photo-card{background: rgba(255,255,255,0.05);backdrop-filter: blur(6px);border-radius:20px;padding:15px;box-shadow:0 0 12px rgba(255,120,180,0.3);transition: transform .4s ease, box-shadow .4s ease;animation:fadeCard 1s ease forwards;opacity:0;cursor:pointer;}
@keyframes fadeCard{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
.photo-card:hover{transform:scale(1.03);box-shadow:0 0 25px rgba(255,160,210,0.6);}
.photo-card img{width:100%;height:270px;border-radius:15px;object-fit:cover;}
.photo-description{margin-top:10px;color:#ffb4d4;font-family:'Open Sans',sans-serif;font-size:0.95rem;text-shadow:0 0 5px rgba(255,100,150,0.4);}
.message-box{margin-top:60px;padding:25px;background: rgba(255,255,255,0.05);border-radius:20px;backdrop-filter:blur(6px);box-shadow:0 0 15px rgba(255,150,200,0.4);animation:fadeInMessage 2s ease forwards;}
@keyframes fadeInMessage{from{opacity:0;transform:translateY(30px);} to{opacity:1;transform:translateY(0);}}
.message-title{font-family:'Great Vibes',cursive;font-size:2.6rem;color:#ff99cc;margin-bottom:10px;}
.message-text{color:#ffbed9;font-size:1.1rem;line-height:1.7;}
.music-control{position:fixed;bottom:20px;background: rgba(102, 17, 68,0.6);border:2px solid #ff99cc;padding:10px 25px;border-radius:25px;color:#ff99cc;font-size:16px;cursor:pointer;z-index:10;backdrop-filter:blur(4px);transition:.3s;}
.music-control:hover{transform:scale(1.05);background: rgba(136,34,85,0.8);box-shadow:0 0 15px #ff99cc;}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);backdrop-filter:blur(6px);display:none;justify-content:center;align-items:center;z-index:99999;}
.modal img{max-width:80%;max-height:80%;border-radius:20px;box-shadow:0 0 20px rgba(255,120,180,0.8);}
.modal-close{position:absolute;top:20px;right:40px;font-size:2.6rem;color:white;cursor:pointer;}
#add-photo-btn{position:fixed;top:20px;right:20px;background:rgba(255,192,203,0.25);border:2px solid #ff99cc;padding:10px 20px;border-radius:20px;color:#ffd1dc;cursor:pointer;z-index:20;}
#add-photo-btn:hover{background:rgba(255,153,204,0.45);}
</style>
</head>
<body>

<div class="main-content" id="main">
  <h2 class="main-title">–ú–æ—è –ø—Ä–∏–Ω—Ü–µ—Å–∞ üíó</h2>
  <div class="album" id="album"></div>
  <div class="message-box">
    <div class="message-title">–ü–æ—Å–ª–∞–Ω–Ω—è –¥–ª—è —Ç–µ–±–µ üíå</div>
    <div class="message-text">
      –¢–∏ –∑–º—ñ–Ω—é—î—à –º—ñ–π —Å–≤—ñ—Ç —Ç–∞–∫, —è–∫ –Ω–µ –∑–º—ñ–Ω—é–≤–∞–≤ –Ω—ñ—Ö—Ç–æ. –¢–∏ —Ä–æ–±–∏—à –º–æ—î –∂–∏—Ç—Ç—è —Ç–µ–ø–ª—ñ—à–∏–º, —Å–≤—ñ—Ç–ª—ñ—à–∏–º —ñ —â–∞—Å–ª–∏–≤—ñ—à–∏–º.<br><br>
      –î—è–∫—É—é —Ç–æ–±—ñ –∑–∞ –∫–æ–∂–µ–Ω –º–æ–º–µ–Ω—Ç, –∑–∞ –∫–æ–∂–Ω—É –µ–º–æ—Ü—ñ—é, –∑–∞ –∫–æ–∂–Ω–µ —Å–ª–æ–≤–æ, —è–∫–µ —Ç–∏ –º–µ–Ω—ñ —Å–∫–∞–∑–∞–ª–∞.<br><br>
      –¢–∏ - –º–æ—î –≤—Å–µ ‚ù§Ô∏è
    </div>
  </div>
</div>

<button class="music-control" onclick="toggleMusic()">üéµ –ú—É–∑–∏–∫–∞</button>
<audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>

<button id="add-photo-btn">‚ûï –î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ</button>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ -->
<div class="modal" id="add-photo-modal">
  <div style="background: rgba(0,0,0,0.8); padding:25px; border-radius:15px; text-align:center; max-width:400px; width:90%;">
    <h2 style="color:#ff99cc;font-family:'Great Vibes',cursive;">–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ üíñ</h2>
    <input id="photo-file" type="file" accept="image/*" style="margin:10px 0;"><br>
    <input id="photo-desc" type="text" placeholder="–í–≤–µ–¥–∏ –æ–ø–∏—Å" style="width:90%; padding:8px; margin:10px 0; border-radius:8px; border:none;">
    <br>
    <button id="save-photo" style="margin-top:10px;padding:8px 20px;border-radius:15px;border:none;background:#ff99cc;color:white;cursor:pointer;">–î–æ–¥–∞—Ç–∏</button>
    <button onclick="closeAddPhoto()" style="margin-top:10px;padding:8px 20px;border-radius:15px;border:none;background:#ff6fa3;color:white;cursor:pointer;">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
  </div>
</div>

<div class="modal" id="gallery-modal">
  <span class="modal-close" onclick="closeGallery()">&times;</span>
  <img id="modal-img">
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAj1aM_i39eq42FdFUw9-QZeq0gJhQwb-E",
  authDomain: "galereya-ani.firebaseapp.com",
  projectId: "galereya-ani",
  storageBucket: "galereya-ani.appspot.com",
  messagingSenderId: "564788961310",
  appId: "1:564788961310:web:64512d257bca9aaa18ce0f",
  measurementId: "G-1W2LH0LDTW"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* –ü–æ–∫–∞–∑ —Ñ–æ—Ç–æ –∑ Firestore –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ */
const album = document.getElementById('album');
db.collection('photos').orderBy('timestamp').onSnapshot(snapshot=>{
  album.innerHTML='';
  snapshot.forEach(doc=>{
    const data=doc.data();
    const card=document.createElement('div');
    card.classList.add('photo-card');
    card.innerHTML=`<img src="${data.url}"><div class="photo-description">${data.desc}</div>`;
    album.appendChild(card);
    card.querySelector('img').addEventListener('click',()=>{
      document.getElementById('gallery-modal').style.display='flex';
      document.getElementById('modal-img').src=data.url;
    });
  });
});

/* –î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ */
const addBtn=document.getElementById('add-photo-btn');
const addModal=document.getElementById('add-photo-modal');
addBtn.onclick=()=>{addModal.style.display='flex';};
function closeAddPhoto(){addModal.style.display='none';}

document.getElementById('save-photo').onclick=async()=>{
  const fileInput=document.getElementById('photo-file');
  const descInput=document.getElementById('photo-desc').value.trim();
  if(!fileInput.files[0] || !descInput){alert('–í–∏–±–µ—Ä–∏ —Ñ–∞–π–ª —Ç–∞ –≤–≤–µ–¥–∏ –æ–ø–∏—Å!'); return;}
  const file=fileInput.files[0];
  const reader=new FileReader();
  reader.onload=function(e){
    const url=e.target.result;
    db.collection('photos').add({
      url:url,
      desc:descInput,
      timestamp: firebase.firestore.FieldValue.serverTimestamp()
    });
    fileInput.value=''; document.getElementById('photo-desc').value=''; closeAddPhoto();
  }
  reader.readAsDataURL(file);
};

/* –ú—É–∑–∏–∫–∞ */
const music=document.getElementById("bg-music");
function toggleMusic(){if(music.paused) music.play();else music.pause();}
</script>

<script>
/* –ú–æ–¥–∞–ª—å–Ω–µ —Ñ–æ—Ç–æ */
function closeGallery(){document.getElementById('gallery-modal').style.display='none';}
</script>

</body>
</html>
